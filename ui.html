<link rel="stylesheet" href="styles.css">

<h1>Invoicy</h1>

<form id="pluginForm">
    <fieldset>
        <legend>Details</legend>

        <p>
            <label for="invoiceTitle">Title</label>
            <input type="text" id="invoiceTitle" name="invoiceTitle">
        </p>

        <p>
            <label for="invoiceNumber">Number</label>
            <input type="text" id="invoiceNumber" name="invoiceNumber">
        </p>

        <p>
            <label for="invoiceDate">Date</label>
            <input type="date" id="invoiceDate" name="invoiceDate">
        </p>
    </fieldset>

    <fieldset>
        <legend for="fromLabel" type="legend" id="fromLabel">From</legend>

        <p>
            <label for="senderName">Name</label>
            <input type="text" id="senderName" name="senderName">
        </p>

        <p>
            <label for="senderEmail">Email</label>
            <input type="email" id="senderEmail" name="senderEmail">
        </p>

        <p>
            <label for="senderStreet">Street</label>
            <input type="text" id="senderStreet" name="senderStreet">
        </p>

        <p>
            <label for="senderCity">City, State</label>
            <input type="text" id="senderCity" name="senderCity">
        </p>

        <p>
            <label for="senderZip">Zip Code</label>
            <input type="text" id="senderZip" name="sender">
        </p>

        <p>
            <label for="senderPhone">Phone</label>
            <input type="tel" id="senderPhone" name="senderPhone">
        </p>

        <p>
            <label for="senderGstNumber">GST #</label>
            <input type="text" id="senderGstNumber" name="senderGstNumber">
        </p>
    </fieldset>

    <fieldset>
        <legend for="toLabel" type="legend" id="toLabel">To</legend>

        <p>
            <label for="invoiceReceiverName">Name</label>
            <input type="text" id="invoiceReceiverName" name="invoiceReceiverName">
        </p>

        <p>
            <label for="invoiceReceiverEmail">Email</label>
            <input type="email" id="invoiceReceiverEmail" name="invoiceReceiverEmail">
        </p>

        <p>
            <label for="invoiceReceiverAddress">Address</label>
            <input type="text" id="invoiceReceiverAddress" name="invoiceReceiverAddress">
        </p>

        <p>
            <label for="invoiceReceiverPhone">Phone</label>
            <input type="tel" id="invoiceReceiverPhone" name="invoiceReceiverPhone">
        </p>
    </fieldset>

    <input type="hidden" name="horizontalFrameDirection" value="horizontal">
    <input type="hidden" name="verticalFrameDirection" value="vertical">

    <button id="generate">Generate Invoice</button>

    <script>
        document.getElementById('generate').onclick = (event) => {

            // Get the form
            let pluginForm = document.querySelector('#pluginForm')
            let legendFromText = document.getElementById('fromLabel').textContent
            let legendToText = document.getElementById('toLabel').textContent

            // Get the field data from the form
            let pluginFormData = new FormData(pluginForm)

            // Create an object and populate it with form data
            let formDataObj = {}

            for (let[key, value] of pluginFormData) {
                formDataObj[key] = value
            }

            parent.postMessage({pluginMessage: {type: 'actionGenerate', legendFromText, legendToText, formDataObj}}, '*')
        }
    </script>

</form>
